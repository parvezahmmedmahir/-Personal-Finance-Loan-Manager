<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - ALI Finance Manager</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #60a5fa 100%);
            min-height: 100vh;
        }
        
        .login-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.95);
        }
        
        .google-btn {
            transition: all 0.3s ease;
        }
        
        .google-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .lang-toggle {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .lang-toggle:hover {
            transform: scale(1.05);
        }
        
        .lang-toggle.active {
            background: #1e3a8a;
            color: white;
        }
        
        .floating-shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        .input-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #6b7280;
        }
        
        .input-with-icon {
            padding-left: 40px;
        }
    </style>
  
  <script type="module" async src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Falifinanc7595back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.10"></script>
  <script type="module" defer src="https://static.rocket.new/rocket-shot.js?v=0.0.1"></script>
  </head>
<body class="gradient-bg">
    <!-- Floating Background Shapes -->
    <div class="floating-shape" style="width: 300px; height: 300px; background: white; top: 10%; left: 5%;"></div>
    <div class="floating-shape" style="width: 200px; height: 200px; background: white; bottom: 15%; right: 10%; animation-delay: 2s;"></div>
    <div class="floating-shape" style="width: 150px; height: 150px; background: white; top: 60%; left: 15%; animation-delay: 4s;"></div>

    <!-- Main Login Container -->
    <div class="flex items-center justify-center min-h-screen px-4 py-8 relative z-10">
        <div class="login-card w-full max-w-md rounded-xl shadow-custom-lg p-8 lg:p-10">
            
            <!-- Language Toggle -->
            <div class="flex justify-end gap-2 mb-6" id="languageToggle">
                <button class="lang-toggle active px-4 py-2 rounded-lg text-sm font-medium border border-border" data-lang="en">
                    English
                </button>
                <button class="lang-toggle px-4 py-2 rounded-lg text-sm font-medium border border-border" data-lang="bn">
                    বাংলা
                </button>
            </div>

            <!-- Logo and Welcome Section -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-primary rounded-xl mb-4">
                    <i class="fas fa-wallet text-3xl text-white"></i>
                </div>
                <h1 class="text-3xl font-bold text-primary mb-2" id="welcomeTitle">Welcome Back</h1>
                <p class="text-text-secondary" id="welcomeSubtitle">Manage your finances with confidence</p>
            </div>

            <!-- Error Message -->
            <div id="errorMessage" class="hidden mb-4 p-3 bg-error-light border border-error rounded-lg">
                <div class="flex items-center gap-2">
                    <i class="fas fa-exclamation-circle text-error"></i>
                    <p class="text-sm text-error" id="errorText">Invalid password. Please try again.</p>
                </div>
            </div>

            <!-- Login Form -->
            <form id="loginForm" class="space-y-6">
                <!-- Password Input -->
                <div>
                    <label for="password" class="block text-sm font-medium text-text-primary mb-2" id="passwordLabel">
                        Password
                    </label>
                    <div class="relative">
                        <i class="fas fa-lock input-icon"></i>
                        <input 
                            type="password" 
                            id="password" 
                            name="password"
                            class="input input-with-icon pr-12"
                            placeholder="Enter password"
                            required
                        >
                        <button 
                            type="button" 
                            id="togglePassword"
                            class="absolute right-3 top-1/2 transform -translate-y-1/2 text-text-secondary hover:text-text-primary transition-colors"
                        >
                            <i class="fas fa-eye" id="eyeIcon"></i>
                        </button>
                    </div>
                    <p class="mt-2 text-xs text-text-secondary" id="passwordHint">Default password: 1122</p>
                </div>

                <!-- Login Button -->
                <button type="submit" class="btn-primary w-full" id="loginButton">
                    <i class="fas fa-sign-in-alt mr-2"></i>
                    <span id="loginButtonText">Login</span>
                </button>
            </form>

            <!-- Divider -->
            <div class="relative my-6">
                <div class="absolute inset-0 flex items-center">
                    <div class="w-full border-t border-border"></div>
                </div>
                <div class="relative flex justify-center text-sm">
                    <span class="px-4 bg-white text-text-secondary" id="orText">OR</span>
                </div>
            </div>

            <!-- Google Sign In -->
            <button 
                type="button" 
                id="googleSignIn"
                class="google-btn w-full flex items-center justify-center gap-3 px-6 py-3 border-2 border-border rounded-lg bg-white hover:bg-gray-50 transition-all"
            >
                <img 
                    src="https://img.rocket.new/generatedImages/rocket_gen_img_19fa9613c-1763565478081.png" 
                    alt="Google logo"
                    class="w-5 h-5"
                >
                <span class="font-medium text-text-primary" id="googleButtonText">Sign in with Google</span>
            </button>

            <!-- Trust Signals -->
            <div class="mt-8 pt-6 border-t border-border">
                <div class="flex items-center justify-center gap-2 text-sm text-text-secondary">
                    <i class="fas fa-shield-alt text-accent"></i>
                    <span id="securityText">Your financial data is secure and encrypted</span>
                </div>
            </div>

            <!-- Additional Info -->
            <div class="mt-6 text-center">
                <p class="text-xs text-text-tertiary" id="infoText">
                    By signing in, you agree to our Terms of Service and Privacy Policy
                </p>
            </div>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                welcomeTitle: 'Welcome Back',
                welcomeSubtitle: 'Manage your finances with confidence',
                passwordLabel: 'Password',
                passwordHint: 'Default password: 1122',
                loginButtonText: 'Login',
                orText: 'OR',
                googleButtonText: 'Sign in with Google',
                securityText: 'Your financial data is secure and encrypted',
                infoText: 'By signing in, you agree to our Terms of Service and Privacy Policy',
                errorText: 'Invalid password. Please try again.',
                connectionError: 'Connection error. Please try again.'
            },
            bn: {
                welcomeTitle: 'স্বাগতম',
                welcomeSubtitle: 'আত্মবিশ্বাসের সাথে আপনার অর্থ পরিচালনা করুন',
                passwordLabel: 'পাসওয়ার্ড',
                passwordHint: 'ডিফল্ট পাসওয়ার্ড: ১১২২',
                loginButtonText: 'লগইন',
                orText: 'অথবা',
                googleButtonText: 'গুগল দিয়ে সাইন ইন করুন',
                securityText: 'আপনার আর্থিক তথ্য সুরক্ষিত এবং এনক্রিপ্ট করা',
                infoText: 'সাইন ইন করে, আপনি আমাদের সেবার শর্তাবলী এবং গোপনীয়তা নীতিতে সম্মত হন',
                errorText: 'ভুল পাসওয়ার্ড। আবার চেষ্টা করুন।',
                connectionError: 'সংযোগ ত্রুটি। আবার চেষ্টা করুন।'
            }
        };

        let currentLang = 'en';

        // Language toggle functionality
        document.querySelectorAll('.lang-toggle').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.lang-toggle').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentLang = this.dataset.lang;
                updateLanguage();
            });
        });

        function updateLanguage() {
            const trans = translations[currentLang];
            document.getElementById('welcomeTitle').textContent = trans.welcomeTitle;
            document.getElementById('welcomeSubtitle').textContent = trans.welcomeSubtitle;
            document.getElementById('passwordLabel').textContent = trans.passwordLabel;
            document.getElementById('passwordHint').textContent = trans.passwordHint;
            document.getElementById('loginButtonText').textContent = trans.loginButtonText;
            document.getElementById('orText').textContent = trans.orText;
            document.getElementById('googleButtonText').textContent = trans.googleButtonText;
            document.getElementById('securityText').textContent = trans.securityText;
            document.getElementById('infoText').textContent = trans.infoText;
            document.getElementById('errorText').textContent = trans.errorText;
            
            // Update placeholder
            document.getElementById('password').placeholder = currentLang === 'en' ? 'Enter password' : 'পাসওয়ার্ড লিখুন';
        }

        // Password toggle visibility
        document.getElementById('togglePassword').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const eyeIcon = document.getElementById('eyeIcon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.classList.remove('fa-eye');
                eyeIcon.classList.add('fa-eye-slash');
            } else {
                passwordInput.type = 'password';
                eyeIcon.classList.remove('fa-eye-slash');
                eyeIcon.classList.add('fa-eye');
            }
        });

        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const password = document.getElementById('password').value;
            const errorMessage = document.getElementById('errorMessage');
            
            if (password === '1122') {
                // Store authentication state
                localStorage.setItem('isAuthenticated', 'true');
                localStorage.setItem('authMethod', 'password');
                localStorage.setItem('language', currentLang);
                
                // Redirect to dashboard
                window.location.href = 'financial_dashboard.html';
            } else {
                // Show error message
                errorMessage.classList.remove('hidden');
                document.getElementById('password').classList.add('input-error');
                
                // Hide error after 3 seconds
                setTimeout(() => {
                    errorMessage.classList.add('hidden');
                    document.getElementById('password').classList.remove('input-error');
                }, 3000);
            }
        });

        // Google Sign In
        document.getElementById('googleSignIn').addEventListener('click', function() {
            // In a real implementation, this would trigger Google OAuth flow
            // For now, we'll simulate successful authentication
            
            // Show loading state
            this.disabled = true;
            this.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i><span>Signing in...</span>';
            
            setTimeout(() => {
                // Store authentication state
                localStorage.setItem('isAuthenticated', 'true');
                localStorage.setItem('authMethod', 'google');
                localStorage.setItem('language', currentLang);
                localStorage.setItem('googleUser', JSON.stringify({
                    name: 'User Name',
                    email: 'user@example.com',
                    picture: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop'
                }));
                
                // Redirect to dashboard
                window.location.href = 'financial_dashboard.html';
            }, 1500);
        });

        // Check if already authenticated
        if (localStorage.getItem('isAuthenticated') === 'true') {
            window.location.href = 'financial_dashboard.html';
        }

        // Load saved language preference
        const savedLang = localStorage.getItem('language') || 'en';
        if (savedLang !== 'en') {
            document.querySelector(`[data-lang="${savedLang}"]`).click();
        }
    </script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>